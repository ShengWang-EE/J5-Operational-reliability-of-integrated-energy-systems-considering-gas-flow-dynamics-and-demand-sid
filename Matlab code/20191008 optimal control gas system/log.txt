20191018
结果不对，稳态切负荷的时候，暂态没有切负荷

20191021 
不管管子怎么流，供《求就是不平衡。
哦不对，是可以用管存的，供《求

按道理这么用管存，压强应该下降的很快啊

20191022
趁跑的时候写个梯度试试，能不能加速，不然时间段太多的也算不了，至少也要算二三十个时间点比较好把
把天然气动态约束换成了原来的天然气暂态文章里的，毕竟那个是测试过的

20191023
下次要多追根究底，看看约束里面的哪一项，哪一个式子的部分有问题
问bob，他是化成milp问题，yalmip建模，自己编的电力系统约束，没有复数，在cplex算

20191024
yalmip不能事先设定一个固定矩阵，然后把sdpvar填进去。因为这样这个矩阵就是数的矩阵不是sdpvar了
模仿matpower写？

20191026
虚数变量约束条件的撰写问题：
1，不能首尾两个等式相连（是不是作为函数写的时候都不行，只能写等式的一边？）
2. 涉及到虚数的不能用abs函数
3. 用imag建模能通过，但结果好像不对。conj试试，或者用其他变量定义方法
4. 就算用之前不可行的形式，去掉虚数部分也不行，说明是写的形式的问题。
5. （如果真的是圆形约束，那就一定要耦合一起写）但是分开写上限（方形约束），有虚数部分可以（那就是圆形约束的问题？）
6. 是平方约束下，上下限的不能同时满足的问题。
7. 假设电压虚部也是正的吧，
都不行。那圆形的约束不能用那就用方形的
最够实在不行就重写电力系统约束，不出现虚数（sin，cos）

20191027
可能是没法判断虚数的导数？
不对，不添加电力系统约束也会有这个问题
只有upperbound可以，有lower就不行了
是因为目标函数和v没关系，所以就不改变了？
卧槽就是初值的问题，要给定初值

20191028
是处理abs的问题，导致yalmip自动离散为milp
可以规定方向？
但现在的问题是还是收敛不了
fmincon可以收敛，但是动态结果好像不太对。ipopt收敛不了

20191029
收敛性的分析情况：(fmincon要额外标幺化，否则天然气暂态约束过大，容易忽略其他约束）
是初值的问题，不能用mpc的初值，而要故障后跑的稳态解作为初值。
只有box约束，收敛
                                fmincon                                                     ipopt
电力约束                                                                                  很快收敛
天然气稳态约束                                                                            
天然气暂态约束                                                                            
只有电力平衡约束                                                                          
只有电力线路约束                                                                          

可能是天然气平衡约束不对？
Gf求解出来的结果方向反了，看看是哪儿错了

20191031
还没有优化之前的应该是符合稳态解的才行
稳态解带进去会被迭代偏掉？

为什么PGs一直是故障后的？

20191103
总之不能收敛

20191112
用回matpower的建模语言吧

20191122
更新稳态中的costfunction

20191201
看看yalmip的gas constraint，按道理应该是线性的，可以重写一下
！！原来是有个sdpvar，我初始化为0了，导致它变成了一个数，而不是原来的sdpvar，然后在优化模型中它一直是初值
20191202
感觉切负荷的结果不对。。
那是因为没加目标函数。。。
加上简单的目标函数之后不收敛？
天然气暂态约束略微越线造成了infeasible，是时间尺度的问题还是事先规定方向的问题（造成没有一小段管子可以暂时倒着流？）
，还是求解时间不够长的问题？
流向应该不会变吧，大不了就少留一点，造成流入比流出暂时多一点，就可以不切负荷了

20191204
应该是动态约束的问题造成了infeasible或者restorion failed
看看有没有想离散稳态天然气方程一样离散暂态的
!! Convex quadratically constrained quadratic programs can also be formulated as SOCPs by reformulating the objective function as a constraint
把唯一的二次等式约束松弛成不等式约束，再目标函数里极熵惩罚项来修正，再通过多次求解优化模型逐渐减小松弛参数，最终趋向等式约束
SCOP的要求是，平方项前面都是正数
很奇怪yalmip的gurobi不能求解scop，找找原因，或者试试mosek
约束左右两边必须开根号或者写成norm的形式，不然约束是不等价的

20191223
线性化。
用terminalcondition和initial的作为平均，LCg能大量减少（向稳态接近）
单单用initial的或者terminal的都很大
20191224
这俩平均数明明一样，怎么一个能求解一个jiu'bu